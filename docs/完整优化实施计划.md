# ğŸš€ CW_Cloud å®Œæ•´ä¼˜åŒ–å®æ–½è®¡åˆ’

## ğŸ“Š **å®æ–½æ¦‚è§ˆ**

| é˜¶æ®µ | æ—¶é—´ | ä¼˜å…ˆçº§ | å®Œæˆåº¦ | ä¸»è¦æˆæœ |
|------|------|--------|--------|----------|
| **Phase 0** | âœ… å·²å®Œæˆ | P0 | 100% | å®æ—¶æ•°æ®æµã€WebSocketæ¨é€ |
| **Phase 1** | 1-2å¤© | P0 | 0% | æ•°æ®æŒä¹…åŒ–ã€Kafkaé›†æˆ |
| **Phase 2** | 3-5å¤© | P1 | 0% | å‰ç«¯åŠŸèƒ½å®Œå–„ã€å†å²æŸ¥è¯¢ |
| **Phase 3** | 5-7å¤© | P2 | 0% | Sparkæµå¤„ç†ã€ç”Ÿäº§éƒ¨ç½² |

---

## ğŸ¯ **Phase 1: æ€¥è¿«ä¼˜åŒ– (1-2å¤©)**

### **âœ… ç«‹å³æ‰§è¡Œæ¸…å•**

#### **æ­¥éª¤1: æ•°æ®åº“è¡¨åˆ›å»º**
```bash
# 1. è¿æ¥MySQLæ•°æ®åº“
mysql -u root -p

# 2. æ‰§è¡Œè¡¨åˆ›å»ºè„šæœ¬
source create-filter-tables.sql

# 3. éªŒè¯è¡¨åˆ›å»º
SHOW TABLES LIKE '%filter%';
SHOW TABLES LIKE '%anomaly%';
```

#### **æ­¥éª¤2: å®‰è£…WebSocket Bridgeä¾èµ–**
```bash
# å®‰è£…mysql2ä¾èµ–
npm install mysql2

# é‡å¯WebSocket Bridge
taskkill /F /IM node.exe  # åœæ­¢ç°æœ‰è¿›ç¨‹
node websocket-bridge.js  # å¯åŠ¨æ–°ç‰ˆæœ¬
```

#### **æ­¥éª¤3: backend.jar Kafkaé…ç½®**
```bash
# 1. å°†backend-kafka-config.ymlå†…å®¹æ·»åŠ åˆ°backend.jaré…ç½®
# 2. é‡å¯backend.jarå¹¶æŒ‡å®šé…ç½®
java --add-opens java.base/java.lang=ALL-UNNAMED \
     -jar backend.jar \
     --spring.config.additional-location=backend-kafka-config.yml
```

### **ğŸ¯ é¢„æœŸæˆæœ**
- âœ… å®æ—¶æ•°æ®è‡ªåŠ¨å…¥åº“
- âœ… å†å²æ•°æ®æŸ¥è¯¢æ”¯æŒ  
- âœ… backend.jaræ¶ˆè´¹Kafkaæ•°æ®
- âœ… å®Œæ•´çš„æ•°æ®æµé—­ç¯

---

## ğŸ—ï¸ **Phase 2: åŠŸèƒ½å¢å¼º (3-5å¤©)**

### **ğŸ¨ å‰ç«¯åŠŸèƒ½æ‰©å±•**

#### **æ­¥éª¤1: å†å²æ•°æ®æŸ¥è¯¢é¡µé¢**
```bash
# åˆ›å»ºæ–°ç»„ä»¶
src/views/realtime/HistoryAnalysis.vue
src/api/realtime/history.ts

# æ›´æ–°è·¯ç”±é…ç½®
src/router/modules/realtime.ts
```

#### **æ­¥éª¤2: ç³»ç»Ÿç›‘æ§é¢æ¿**
```bash
# æ‰©å±•ç°æœ‰ç»„ä»¶
src/views/realtime/SystemStatus.vue

# æ·»åŠ æ€§èƒ½æŒ‡æ ‡API
src/api/system/metrics.ts
```

#### **æ­¥éª¤3: ç®—æ³•é…ç½®ç•Œé¢**
```bash
# æ–°å»ºé…ç½®é¡µé¢
src/views/realtime/AlgorithmConfig.vue

# å®æ—¶å‚æ•°è°ƒæ•´API  
src/api/realtime/config.ts
```

### **ğŸ”§ åç«¯æœåŠ¡å¢å¼º**

#### **æ­¥éª¤1: Filterå¾®æœåŠ¡å¼€å‘**
```bash
# åˆ›å»ºæ–°çš„å¾®æœåŠ¡æ¨¡å—
yudao-module-filter/
â”œâ”€â”€ yudao-module-filter-api/
â”œâ”€â”€ yudao-module-filter-biz/  
â””â”€â”€ yudao-module-filter-server/

# ç«¯å£: 48084
# åŠŸèƒ½: å†å²æŸ¥è¯¢ã€é…ç½®ç®¡ç†ã€æŒ‡æ ‡ç›‘æ§
```

#### **æ­¥éª¤2: æ•°æ®åº“æœåŠ¡å±‚**
```bash
# Mapperæ¥å£å¼€å‘
FilterRecordMapper.java
AnomalyRecordMapper.java  
DeviceStatusMapper.java

# Serviceå±‚å®ç°
FilterHistoryService.java
SystemMetricsService.java
```

### **ğŸ¯ é¢„æœŸæˆæœ**
- âœ… å®Œæ•´çš„å†å²æ•°æ®æŸ¥è¯¢åŠŸèƒ½
- âœ… å®æ—¶ç³»ç»Ÿç›‘æ§é¢æ¿
- âœ… ç®—æ³•å‚æ•°åœ¨çº¿è°ƒæ•´
- âœ… å¤šè®¾å¤‡ç®¡ç†ç•Œé¢
- âœ… å¼‚å¸¸å‘Šè­¦åŠŸèƒ½

---

## âš¡ **Phase 3: ç”Ÿäº§å°±ç»ª (5-7å¤©)**

### **ğŸ”¥ Sparkæµå¤„ç†å®Œæ•´å¯ç”¨**

#### **æ­¥éª¤1: StreamProcessorå¢å¼º**
```bash
# ç¼–è¯‘å¢å¼ºç‰ˆStreamProcessor
cd floatdata/floatdata-streaming
mvn clean package -DskipTests

# å¯åŠ¨Sparkæµå¤„ç†
java -cp target/floatdata-streaming-1.0.0.jar \
     com.floatdata.spark.StreamProcessor
```

#### **æ­¥éª¤2: æœºå™¨å­¦ä¹ é›†æˆ**
```bash
# æ·»åŠ MLä¾èµ–
<dependency>
    <groupId>org.apache.spark</groupId>
    <artifactId>spark-mllib_2.12</artifactId>
</dependency>

# å¼‚å¸¸æ£€æµ‹æ¨¡å‹è®­ç»ƒ
IsolationForestDetector.scala
FeatureExtractor.scala
```

### **ğŸš€ éƒ¨ç½²è‡ªåŠ¨åŒ–**

#### **æ­¥éª¤1: ç”Ÿäº§éƒ¨ç½²è„šæœ¬**
```bash
# ä¸€é”®éƒ¨ç½²è„šæœ¬
deployment-automation.bat

# Dockerå®¹å™¨åŒ– (å¯é€‰)
Dockerfile
docker-compose.yml
```

#### **æ­¥éª¤2: ç›‘æ§å‘Šè­¦**
```bash
# ç³»ç»Ÿç›‘æ§
Prometheus + Grafanaé›†æˆ
å¥åº·æ£€æŸ¥ç«¯ç‚¹

# å‘Šè­¦é€šçŸ¥
é‚®ä»¶/çŸ­ä¿¡å‘Šè­¦
é’‰é’‰/å¾®ä¿¡é€šçŸ¥
```

### **ğŸ¯ é¢„æœŸæˆæœ**
- âœ… å®Œæ•´çš„Sparkæµå¤„ç†
- âœ… æœºå™¨å­¦ä¹ å¼‚å¸¸æ£€æµ‹
- âœ… ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨åŒ–éƒ¨ç½²  
- âœ… å®Œå–„çš„ç›‘æ§å‘Šè­¦ä½“ç³»
- âœ… é«˜å¯ç”¨æ¶æ„è®¾è®¡

---

## ğŸ“ˆ **æŠ•èµ„å›æŠ¥åˆ†æ**

### **æŠ€æœ¯ä»·å€¼**
- **ç°çŠ¶**: åŸºç¡€å®æ—¶æ•°æ®æµ (40%å®Œæˆåº¦)
- **Phase 1å**: å®Œæ•´ä¸šåŠ¡é—­ç¯ (70%å®Œæˆåº¦)  
- **Phase 2å**: ç”Ÿäº§å¯ç”¨ç³»ç»Ÿ (85%å®Œæˆåº¦)
- **Phase 3å**: ä¼ä¸šçº§å¹³å° (95%å®Œæˆåº¦)

### **ä¸šåŠ¡ä»·å€¼**
- **å®æ—¶ç›‘æ§**: è®¾å¤‡æ•…éšœé¢„è­¦ï¼Œå‡å°‘åœæœºæŸå¤±
- **æ•°æ®åˆ†æ**: å†å²è¶‹åŠ¿åˆ†æï¼Œä¼˜åŒ–ç”Ÿäº§å·¥è‰º  
- **æ™ºèƒ½è¯Šæ–­**: AIè¾…åŠ©å†³ç­–ï¼Œæå‡ç»´æŠ¤æ•ˆç‡
- **æˆæœ¬èŠ‚çº¦**: é¢„æµ‹æ€§ç»´æŠ¤ï¼Œé™ä½è¿ç»´æˆæœ¬

### **æ—¶é—´æˆæœ¬**
- **æ€»å¼€å‘æ—¶é—´**: 8-14å¤©
- **ROIå‘¨æœŸ**: 3-6ä¸ªæœˆ
- **é•¿æœŸæ”¶ç›Š**: å¹´åº¦ç»´æŠ¤æˆæœ¬é™ä½30%+

---

## ğŸ¯ **ç«‹å³è¡ŒåŠ¨å»ºè®®**

### **ä»Šå¤©å°±å¼€å§‹ (2å°æ—¶)**
1. **æ‰§è¡Œæ•°æ®åº“è„šæœ¬**: `mysql < create-filter-tables.sql`
2. **å®‰è£…MySQLä¾èµ–**: `npm install mysql2`
3. **é‡å¯WebSocket Bridge**: éªŒè¯æ•°æ®å…¥åº“åŠŸèƒ½

### **æœ¬å‘¨å®Œæˆ (Phase 1)**
1. **é…ç½®backend.jar Kafkaæ¶ˆè´¹**: å®ç°å®Œæ•´æ•°æ®æµ
2. **éªŒè¯æ•°æ®æŒä¹…åŒ–**: ç¡®ä¿å†å²æ•°æ®å¯æŸ¥è¯¢
3. **æµ‹è¯•ç³»ç»Ÿç¨³å®šæ€§**: é•¿æ—¶é—´è¿è¡Œæµ‹è¯•

### **ä¸‹å‘¨è§„åˆ’ (Phase 2)**
1. **å¼€å‘å†å²æŸ¥è¯¢é¡µé¢**: æå‡ç”¨æˆ·ä½“éªŒ
2. **å®Œå–„ç›‘æ§é¢æ¿**: å®æ—¶ç³»ç»ŸçŠ¶æ€å±•ç¤º
3. **å®ç°é…ç½®ç®¡ç†**: ç®—æ³•å‚æ•°åœ¨çº¿è°ƒæ•´

**ç°åœ¨å°±å¼€å§‹ Phase 1 çš„æ•°æ®åº“åˆå§‹åŒ–å§ï¼** ğŸš€

---

## ğŸ’¡ **å¤‡æ³¨è¯´æ˜**

**å…³äºlintè­¦å‘Š**: package.jsonçš„schemaåŠ è½½è­¦å‘Šæ˜¯ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œä¸å½±å“åŠŸèƒ½ï¼Œå¯ä»¥å¿½ç•¥ã€‚è¿™æ˜¯ç”±äºIDEå°è¯•ä»å¤–éƒ¨URLåŠ è½½JSON schemaéªŒè¯è§„åˆ™æ—¶ç½‘ç»œä¸é€šå¯¼è‡´çš„ï¼Œå¯¹é¡¹ç›®è¿è¡Œæ²¡æœ‰å½±å“ã€‚
