# ğŸš€ å®æ—¶ç›‘æ§ç³»ç»Ÿ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

âœ… **å·²ä¿®å¤**: Kafkaæ•°æ®ç›®å½•å·²æ¸…ç†  
âœ… **æ­£åœ¨è¿è¡Œ**: Kafkaå’ŒZookeeperæ­£åœ¨é‡æ–°åˆå§‹åŒ–  
âœ… **å·²å‡†å¤‡**: ä¸€é”®å¯åŠ¨è„šæœ¬å·²åˆ›å»º

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œï¼ˆç­‰å¾…ä¸­ï¼‰

### å½“å‰çª—å£è¯´æ˜

æ‚¨ç°åœ¨åº”è¯¥æœ‰ä»¥ä¸‹çª—å£æ‰“å¼€ï¼š

1. **KAFKA-START.bat** - Kafkaå’ŒZookeeperå¯åŠ¨ä¸­
2. **ä¸€é”®å¯åŠ¨æ•°æ®æµ.bat** - ç­‰å¾…Kafkaå°±ç»ªï¼ˆ60ç§’ï¼‰

### ç­‰å¾…æ—¶é—´çº¿

```
ç°åœ¨ â”€â”€â”€â”€> 60ç§’å â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> å®Œæˆ
  â”‚           â”‚                    â”‚
  â”‚           â”‚                    â”œâ”€ Topicsåˆ›å»º
  â”‚           â”‚                    â”œâ”€ è¿æ¥æµ‹è¯•
  â”‚           â”‚                    â””â”€ TDMSç”Ÿäº§è€…å¯åŠ¨
  â”‚           â”‚
  â”‚           â””â”€ Kafkaå°±ç»ª
  â”‚
  â””â”€ Kafkaå¯åŠ¨ä¸­
```

---

## âœ¨ å®Œæˆåä¼šçœ‹åˆ°

### 1. ä¸€é”®å¯åŠ¨è„šæœ¬å®Œæˆ

```
âœ“ Kafka Topicså·²åˆ›å»º
âœ“ TDMSç”Ÿäº§è€…å·²å¯åŠ¨

ç°åœ¨å¯ä»¥:
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000/realtime/filter
2. ç‚¹å‡»"æ–°å¼€è¿æ¥"æŒ‰é’®
3. è§‚çœ‹å®æ—¶æ•°æ®æµ!
```

### 2. å‰ç«¯æµè§ˆå™¨

- è®¾å¤‡ID: æ¥è‡ªTDMSæ–‡ä»¶åï¼ˆä¾‹å¦‚ `tdms-data-10-left-1.tdms-Untitled-Untitled`ï¼‰
- å¤„ç†é€Ÿåº¦: **50ä¸‡-200ä¸‡ samples/s** åŠ¨æ€å˜åŒ–
- æ³¢å½¢å›¾: å®æ—¶æ›´æ–°
- SNRæ”¹å–„: **1-3 dB**

---

## ğŸ“Š å®ç”¨è„šæœ¬

### å®æ—¶ç›‘æ§

```batch
å®æ—¶çŠ¶æ€ç›‘æ§.bat
```
æ¯5ç§’åˆ·æ–°æ˜¾ç¤ºæ‰€æœ‰æœåŠ¡çŠ¶æ€

### ç³»ç»Ÿè¯Šæ–­

```batch
CHECK-SYSTEM-STATUS.bat
```
ä¸€æ¬¡æ€§æ£€æŸ¥æ‰€æœ‰æœåŠ¡å’ŒKafka topics

### æµ‹è¯•Kafkaè¿æ¥

```batch
python test-kafka-send.py
```
æµ‹è¯•Pythonåˆ°Kafkaçš„è¿æ¥

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹Kafka Topics

```batch
cd kafka
bin\windows\kafka-topics.bat --bootstrap-server localhost:9092 --list
```

### å®æ—¶æŸ¥çœ‹Kafkaæ¶ˆæ¯ï¼ˆsample-inputï¼‰

```batch
cd kafka
bin\windows\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic sample-input --from-beginning
```

### å®æ—¶æŸ¥çœ‹Kafkaæ¶ˆæ¯ï¼ˆsample-outputï¼‰

```batch
cd kafka
bin\windows\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic sample-output --from-beginning
```

---

## ğŸ® å®Œæ•´å¯åŠ¨æµç¨‹ï¼ˆä»å¤´å¼€å§‹ï¼‰

å¦‚æœéœ€è¦ä»å¤´å¼€å§‹å¯åŠ¨æ•´ä¸ªç³»ç»Ÿï¼š

### 1. å¯åŠ¨åŸºç¡€è®¾æ–½

```batch
# MySQL - åº”è¯¥å·²ç»åœ¨è¿è¡Œ
# Redis
redis\redis-server.exe redis\redis.windows.conf

# Nacos
nacos\bin\startup.cmd -m standalone
```

### 2. å¯åŠ¨æ•°æ®æµæœåŠ¡

```batch
# Kafka + Zookeeper
KAFKA-START.bat

# ç­‰å¾…60ç§’åè¿è¡Œ
ä¸€é”®å¯åŠ¨æ•°æ®æµ.bat
```

### 3. å¯åŠ¨åç«¯æœåŠ¡

```batch
# Backendæ»¤æ³¢æœåŠ¡
START-BACKEND-FAST.bat

# WebSocketæ¡¥æ¥
start cmd /k "node websocket-bridge.js"
```

### 4. å¯åŠ¨å¾®æœåŠ¡

```batch
# Gateway, System, Infra
QUICK-START-WITH-NACOS.bat
```

### 5. å¯åŠ¨å‰ç«¯

```batch
cd yudao-ui-admin-vue3
npm run dev
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜A: TDMSç”Ÿäº§è€…æ— æ•°æ®

**æ£€æŸ¥**:
```batch
cd kafka
bin\windows\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic sample-input --timeout-ms 3000
```

**å¦‚æœæ²¡æœ‰æ•°æ®**:
1. æ£€æŸ¥TDMSç”Ÿäº§è€…çª—å£æ˜¯å¦æœ‰é”™è¯¯
2. ç¡®è®¤ `floatdata\data\*.tdms` æ–‡ä»¶å­˜åœ¨
3. é‡å¯TDMSç”Ÿäº§è€…: `START-TDMS-REALTIME.bat`

---

### é—®é¢˜B: å‰ç«¯æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®

**ç—‡çŠ¶**: è®¾å¤‡IDæ˜¯ `sensor-simulation`

**åŸå› **: Backendæ²¡æœ‰å‘Kafkaå‘é€æ•°æ®

**è§£å†³**:
1. æ£€æŸ¥sample-output topicæ˜¯å¦æœ‰æ•°æ®
2. é‡å¯Backend: `START-BACKEND-FAST.bat`
3. æŸ¥çœ‹Backendæ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

---

### é—®é¢˜C: Kafkaå¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**: `all log dirs have failed`

**è§£å†³**:
```batch
# 1. åœæ­¢æ‰€æœ‰Kafkaè¿›ç¨‹
taskkill /F /IM java.exe /FI "MEMUSAGE lt 600000"

# 2. åˆ é™¤æ•°æ®ç›®å½•
rmdir /S /Q data\kafka-logs
rmdir /S /Q data\zookeeper

# 3. é‡æ–°å¯åŠ¨
KAFKA-START.bat
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### æ­£å¸¸è¿è¡ŒæŒ‡æ ‡

| æŒ‡æ ‡ | é¢„æœŸå€¼ | è¯´æ˜ |
|------|--------|------|
| TDMSç”Ÿäº§è€…CPU | 300-800% | å¤šçº¿ç¨‹å¤„ç† |
| Backendå†…å­˜ | 2-4 GB | JVMå †å†…å­˜ |
| Kafkaæ¶ˆæ¯/ç§’ | 1000-2000 | æ‰¹é‡å‘é€ |
| å‰ç«¯æ˜¾ç¤ºé€Ÿç‡ | 50ä¸‡-200ä¸‡ | samples/s |
| WebSocketå»¶è¿Ÿ | 200-500ms | æ¨é€é—´éš” |

---

## ğŸ¯ æˆåŠŸæ£€æŸ¥æ¸…å•

- [ ] Zookeeperç«¯å£2181æ­£åœ¨ç›‘å¬
- [ ] Kafkaç«¯å£9092æ­£åœ¨ç›‘å¬
- [ ] Topics `sample-input` å’Œ `sample-output` å­˜åœ¨
- [ ] TDMSç”Ÿäº§è€…æ˜¾ç¤º"å‘é€æˆåŠŸ"
- [ ] Backendæ˜¾ç¤º"Processing message"
- [ ] WebSocket Bridgeæ˜¾ç¤ºçœŸå®è®¾å¤‡ID
- [ ] å‰ç«¯æ˜¾ç¤ºåŠ¨æ€å˜åŒ–çš„å¤„ç†é€Ÿåº¦
- [ ] æ³¢å½¢å›¾å®æ—¶åˆ·æ–°

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. è¿è¡Œ `å®æ—¶çŠ¶æ€ç›‘æ§.bat` æŸ¥çœ‹æœåŠ¡çŠ¶æ€
2. è¿è¡Œ `CHECK-SYSTEM-STATUS.bat` è¯¦ç»†è¯Šæ–­
3. æŸ¥çœ‹å„æœåŠ¡çª—å£çš„é”™è¯¯ä¿¡æ¯
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰çš„æ—¥å¿—

---

**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-12-03 21:22  
**çŠ¶æ€**: Kafkaé‡å¯ä¸­ï¼Œç­‰å¾…ä¸€é”®å¯åŠ¨è„šæœ¬å®Œæˆ
